{% from "partials/avatar.html" import avatar %}

{% macro follows(users) %}
    <ul class="follow-list mt-3">
        {% for user in users %}
            {% set is_self = g.user and g.user.id == user.id %}

            <li>
                {{ avatar(user) }}
                <div class="details">
                    <h4>
                        <a href="{{ url_for('users.show', user_id=user.id) }}">{{ user.first_name }} {{ user.last_name }}</a>
                    </h4>
                    <p class="small">@{{ user.username }}</p>
                    {{ user.bio | to_markdown | safe }}
                </div>
                {% if not is_self and g.user %}
                    <a href="{{ url_for('users.follow', user_id=user.id) }}" class="button {{ 'secondary' if g.user.is_following(user) }}">
                        {{ 'Unfollow' if user.is_following(g.user) else 'Follow' }}
                    </a>
                {% endif %}
            </li>
        {% else %}
            {% include "partials/no_results.html" %}
        {% endfor %}
    </ul>
{% endmacro %}