{% macro checkout(stripe_session, stripe_api_key) %}
    <body>
        <p>Redirecting...</p>
        <script src="https://js.stripe.com/v3/"></script>
        <script type="text/javascript">
            const stripe = Stripe('{{ stripe_api_key }}');

            try {
                const session = JSON.parse('{{ stripe_session | tojson }}');
                const result = stripe.redirectToCheckout({ sessionId: session.id });
            } catch(error) {
                console.error(error);
                alert('Error');
            }
        </script>
    </body>
{% endmacro %}